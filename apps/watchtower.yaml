# yaml-language-server: $schema=https://raw.githubusercontent.com/compose-spec/compose-spec/master/schema/compose-spec.json
#######################################
# WATCHTOWER (CONTAINER IMAGE UPDATING)
#######################################

services:
    watchtower:
        container_name: watchtower
        image: containrrr/watchtower:1.7.1@sha256:6dd50763bbd632a83cb154d5451700530d1e44200b268a4e9488fefdfcf2b038
        profiles: ["utilities", "all"]
        networks:
            internal:
            docker:
        security_opt:
            - no-new-privileges:true
        restart: always
        environment:
            TZ: ${TZ}
            WATCHTOWER_CLEANUP: "true"
            WATCHTOWER_REMOVE_VOLUMES: "true"
            WATCHTOWER_INCLUDE_STOPPED: "true"
            WATCHTOWER_NO_STARTUP_MESSAGE: "false"
            WATCHTOWER_SCHEDULE: 0 30 12 * * *
            DOCKER_HOST: tcp://socket-proxy:2375
